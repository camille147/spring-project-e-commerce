<div class="container mx-auto p-10">
    <h1 class="text-3xl font-bold mb-6">Mon Panier</h1>

    <div th:if="${cartItems.isEmpty()}" class="bg-blue-100 p-4 rounded">
        Votre panier est vide. <a th:href="@{/user/shop}" class="underline">Continuer mes achats.</a>
    </div>

    <table th:unless="${cartItems.isEmpty()}" class="w-full text-left border-collapse">
        <thead>
        <tr class="border-b">
            <th class="py-2">Produit</th>
            <th>Prix Unitaire</th>
            <th>Quantité</th>
            <th>Sous-total</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${cartItems}" class="border-b">
            <td class="py-4 flex items-center">
                <img th:src="${item.product.defaultPicture.pictureUrl}" width="50" class="mr-4">
                <span th:text="${item.product.productName}"></span>
            </td>
            <td th:text="${#numbers.formatDecimal(item.product.getEffectivePrice(), 1, 2)} + '€'"></td>
            <td th:text="${item.quantity}"></td>
            <td class="font-bold" th:text="${#numbers.formatDecimal(item.getSubTotal(), 1, 2)} + '€'"></td>
        </tr>
        </tbody>
    </table>

    <div th:unless="${cartItems.isEmpty()}" class="mt-10 text-right">
        <p class="text-2xl">Total : <span class="font-bold" th:text="${#numbers.formatDecimal(total, 1, 2)} + '€'"></span></p>

        <form th:action="@{/user/order/checkout}" method="post">
            <button type="submit" class="bg-black text-white px-8 py-3 rounded-lg mt-4">
                Valider ma commande
            </button>
        </form>
    </div>
</div>